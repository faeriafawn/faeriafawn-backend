<!DOCTYPE html>
<html lang="en">
<head>
 <link href="https://fonts.googleapis.com/css2?family=Love+Ya+Like+A+Sister&display=swap" rel="stylesheet">
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
   <title class="home-title">FaeriaFawn â€” Home</title>
   <link href="https://fonts.googleapis.com/css2?family=Nunito&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css" />
  <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;700&display=swap" rel="stylesheet">
<script src="https://js.stripe.com/v3/"></script>
</head>

<body>
  <button id="music-toggle">
     <img id="music-icon" src="assets/icons/sound-on.png" alt="Toggle Music">
  </button>

   <audio id="bg-music" autoplay loop muted>
    <source src="assets/music/piano-for-babies.mp3" type="audio/mpeg">
  </audio>

  <div class="page-wrapper">
    <img src="assets/images/faeriafawn and mushapple - logo trans.png"  alt="cozy side image" class="side-photo">
  <header class="main-header">
    <h1>â™¡ shop faeriafawn â™¡</h1>
    <p class="intro-text">Shop my magical goods ðŸŒ¸</p>
    <img src="assets/images/bee line.png" alt="stitch divider" class="stitch-divider">
<div class="nav-wrapper">
      <nav class="top-nav">
  <a href="index.html" class="nav-button"> 
    <span>Home</span>
  </a>
  <a href="artgallery.html" class="nav-button">
    <span>Gallery</span>
  </a>
  <a href="shop.html" class="nav-button">
    <span>Shop</span>
  </a>
   <a href="about.html" class="nav-button">
    <span>About</span>
  </a>
  <a href="contact.html" class="nav-button">
    <span>Contact</span>
  </a>
</nav>
</div>
  </header>
  <div class="social-buttons">
  <a href="mailto:faeriafawn@gmail.com" class="social-btn email">Join my Email List</a>
  <a href="https://patreon.com/yourpatreon" target="_blank" class="social-btn patreon">Become a Patreon member</a>
  <a href="https://instagram.com/faeriafawn" target="_blank" class="social-btn instagram">Instagram</a>
  <a href="https://youtube.com/yourchannel" target="_blank" class="social-btn youtube">YouTube</a>
</div>
  </div>

<main class="shop-page">

  <!-- Prints Section -->
  <section class="shop-section prints">
    <h2 class="section-title">â™¡ Prints â™¡</h2>
    <div class="product-grid">

      <!-- Product Card 1 -->
      <div class="product-card">
        <img src="assets/images/faeriefawn-print.jpg" alt="Faerie Fawn Print">
        <h3>Faeria Fawn Print</h3>
        <p>A5 size print</p>
        <p>Â£2.50</p>
        <button class="buy-button" data-product="faeriafawn-print">Add to Cart</button>
      </div>

      <!-- Product Card 2 -->
      <div class="product-card">
        <img src="assets/images/dewlight valley print.jpg" alt="Dewlight Valley Print">
        <h3>Dewlight Valley Print</h3>
        <p>A5 size print</p>
        <p>Â£2.50</p>
        <button class="buy-button" data-product="dewlight-valley-print">Add to Cart</button>
      </div>

      <!-- Add more product cards here -->

    </div>
  </section>

  <!-- Stickers Section -->
<section class="shop-section stickers">
  <h2 class="section-title">â™¡ Stickers â™¡</h2>
  <div class="product-grid">

    <!-- Sticker Card 1 -->
<div class="product-card">
      <img src="assets/images/faeriafawn stickers.jpg" alt="Faeriafawn Stickers">
      <h3>Faeria Fawn - Stickers</h3>
      <p>Set of 3 sticker pack!</p>
      <p>Â£2</p>
      <button class="buy-button" data-product="faeriafawn-stickers">Add to Cart</button>
    </div>

<!-- Sticker Card 2 -->
    <div class="product-card">
      <img src="assets/images/strawbie bunnie stickers.jpg" alt="Sweet Strawbie Bunnie Sticker">
      <h3>Sweet Strawbie Bunnie - Stickers</h3>
      <p>Set of 3 sticker pack!</p>
      <p>Â£2</p>
      <button class="buy-button" data-product="sweet-strawbie-bunnie-stickers">Add to Cart</button>
    </div>

    <!-- Sticker Card 3 -->
    <div class="product-card">
      <img src="assets/images/billie sox stickers.jpg" alt="Mushroom Cottage Sticker">
      <h3>Billie Sox - Stickers</h3>
      <p>Set of 3 sticker pack!</p>
      <p>Â£2</p>
      <button class="buy-button" data-product="billie-sox-stickers">Add to Cart</button>
    </div>

    <!-- Add more sticker cards here -->

  </div>
</section>

<!-- Keychains Section -->
<section class="shop-section keychains">
  <h2 class="section-title">â™¡ Keychains â™¡</h2>
  <div class="product-grid">

    <!-- Keychain Card 1 -->
    <div class="product-card">
      <img src="assets/images/faeriefawn-keychain.jpg" alt="Faerie Fawn Keychain">
      <h3>Coming soon!</h3>
      <p>...</p>
      <p>...</p>
    </div>

    <!-- Keychain Card 2 -->
    <div class="product-card">
      <img src="assets/images/mushroom-keychain.jpg" alt="Mushroom Cottage Keychain">
      <h3>Coming soon!</h3>
      <p>...</p>
      <p>...</p>
    </div>

    <!-- Add more keychain cards here -->

  </div>
</section>
</main>

<!-- Originals Section -->
<section class="shop-section originals">
  <h2 class="section-title">ðŸŽ¨ Original Paintings ðŸŽ¨</h2>
  <div class="product-grid">

    <!-- Original Painting Card 1 -->
    <div class="product-card">
      <img src="assets/images/faeriefawn-original.jpg" alt="Faerie Fawn Original Painting">
      <h3>Coming soon!</h3>
      <p>...</p>
      <p>...</p>
    </div>

    <!-- Original Painting Card 2 -->
    <div class="product-card">
      <img src="assets/images/mushroom-original.jpg" alt="Mushroom Cottage Original Painting">
      <h3>Coming Soon!</h3>
      <p>...</p>
      <p>...</p>
    </div>

    <!-- Add more original painting cards here -->

  </div>
</section>
<!-- Cart Preview -->
 <div class="floating-cart">
<div id="cart-preview" class="cart-preview">
  <div class="cart-content">
  <h3>ðŸŒ· Your Cart</h3>
  <ul id="cart-items"></ul>
  <p id="cart-total">Total: Â£0.00</p>
</div>
<div class="checkout-area">
    <button id="checkout-button">Checkout</button>
  </div>
  </div>

<script>
  const stripe = Stripe("pk_live_51SPt6ZBpMZrXSKhBHEhu0z6qSZzu9V3YtJVdm4Mu5OopDGOCvvEen6wuFVexjvFz32RRUiMFBbcnXNp2FICbVgb000tDYBXPpJ"); // replace with your publishable key
  const cart = [];

  // Add your product catalog here so preview can use names + prices
  const productCatalog = {
    "faeriafawn-print": { name: "Faeria Fawn Print", price: 250 },
    "dewlight-valley-print": { name: "Dewlight Valley Print", price: 250 },
    "faeriafawn-stickers": { name: "Faeria Fawn Stickers", price: 150 },
    "sweet-strawbie-bunnie-stickers": { name: "Sweet Strawbie Bunnie Stickers", price: 400 },
    "billie-sox-stickers": { name: "Billie Sox Stickers", price: 150 }
  };

  function findCartItem(productId) {
    return cart.find(item => item.productId === productId);
  }

  // ðŸ‘‰ Paste your updateCartPreview function here
  function updateCartPreview() {
    const cartItemsList = document.getElementById("cart-items");
    const cartTotal = document.getElementById("cart-total");
    cartItemsList.innerHTML = "";

    let total = 0;

    cart.forEach(item => {
      const product = productCatalog[item.productId];
      if (!product) return;

      const li = document.createElement("li");
      li.textContent = `${product.name} Ã— ${item.quantity}`;
      cartItemsList.appendChild(li);

      total += product.price * item.quantity;
    });

    cartTotal.textContent = `Total: Â£${(total / 100).toFixed(2)}`;
  }

  // Add-to-cart logic
  document.querySelectorAll(".buy-button").forEach(button => {
    button.addEventListener("click", () => {
      const productId = button.getAttribute("data-product");
      if (!productId) return;

      const existingItem = findCartItem(productId);
      if (existingItem) {
        existingItem.quantity += 1;
      } else {
        cart.push({ productId: productId, quantity: 1 });
      }

      updateCartPreview(); // refresh preview after each click
    });
  });

  // Checkout logic
// Checkout logic
document.getElementById("checkout-button").addEventListener("click", async () => {
  try {
    const response = await fetch("https://faeriafawn-backend.onrender.com/create-checkout-session", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ cart: cart })
    });

    const session = await response.json();
    // Redirect to Stripe Checkout
    window.location.href = session.url;
  } catch (error) {
    console.error("Error creating checkout session:", error);
    alert("Something went wrong: " + error.message);
  }
});
</script>
</body>
</html>